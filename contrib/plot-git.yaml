---

upstreams:
  github:
    url: https://github.com/

check:
  image: cgr.dev/chainguard/git
  cmds:
    - 'git clone http://${SH4D0WUP_BOUND_ADDR}/kpcyrd/sh4d0wup'
    - ['ls', '-la', 'sh4d0wup']
    - ['./sh4d0wup/configure']

artifacts:
  blob:
    type: git
    git: blob
    data: |
      #!/bin/sh
      id
  blob_zlib:
    type: compress
    compression: zlib
    artifact: blob

  tree:
    type: git
    git: tree
    entries:
      - mode: blob-executable
        filename: configure
        oid:
          artifact: blob
  tree_zlib:
    type: compress
    compression: zlib
    artifact: tree

  commit:
    type: git
    git: commit
    tree:
      artifact: tree
    author: kpcyrd <git@rxv.cc> 1637076383 +0100
    committer: kpcyrd <git@rxv.cc> 1637076383 +0100
    message: "Release v0.3.0\n"
  commit_zlib:
    type: compress
    compression: zlib
    artifact: commit

  refs:
    type: git
    git: ref-list
    refs:
      refs/heads/main:
        artifact: commit

routes:
  - path: '/kpcyrd/sh4d0wup/info/refs'
    type: static
    args:
      artifact: refs
  - path: '/kpcyrd/sh4d0wup/HEAD'
    type: static
    args:
      data: |
        ref: refs/heads/main
  - path: '/kpcyrd/sh4d0wup/objects/info/packs'
    type: static
    args:
      data: "\n"
  - path: '/kpcyrd/sh4d0wup/objects/info/http-alternates'
    type: static
    args:
      data: "\n"
  - path: '/kpcyrd/sh4d0wup/objects/info/alternates'
    type: static
    args:
      data: "\n"
  - path: '/kpcyrd/sh4d0wup/objects/ce/127f2ede2e312b99bc78ec9d30f8a8d42605e0'
    type: static
    args:
      artifact: commit_zlib
  - path: '/kpcyrd/sh4d0wup/objects/a9/5908311efdf5c082197df65740f4f51619a8f2'
    type: static
    args:
      artifact: tree_zlib
  - path: '/kpcyrd/sh4d0wup/objects/80/5f5820711d9fab9b795ce7cd45a89aea535a6c'
    type: static
    args:
      artifact: blob_zlib

  - type: proxy
    args:
      upstream: github
